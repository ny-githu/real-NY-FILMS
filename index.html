<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FilmHub - Home</title>
    <style>
      body {
        font-family: Arial, sans-serif; 
        background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        min-height: 100vh;
        margin: 0;
      }
      .container {
        width: 440px; margin: 40px auto; background: #fff; 
        padding: 30px; box-shadow: 0 0 12px #aaa; border-radius: 12px;
      }
      h1 { text-align: center; color: #c0392b;}
      .btn-group { display: flex; justify-content: space-around; margin-top: 20px; }
      a.button { 
        padding: 10px 30px; background: #007bff; color: #fff; 
        text-decoration: none; border-radius: 4px;
        transition: background 0.2s;
      }
      a.button:hover { background: #0056b3;}
      .films {
        display: flex; gap: 20px; margin-top: 30px; justify-content: center;
        flex-wrap: wrap;
      }
      .film-card {
        background: #fff; border-radius: 8px; box-shadow: 0 0 8px #aaa;
        width: 140px; padding: 10px; text-align: center;
        transition: transform 0.2s;
        margin-bottom: 18px;
      }
      .film-card img {
        width: 100px; border-radius: 6px;
        margin-bottom: 8px;
      }
      .film-card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 16px #c0392b88;
      }
      .film-title {
        font-weight: bold; color: #007bff;
      }
      #loading {
        text-align: center; color: #aaa;
        margin-top: 20px;
      }
    </style>
    <!-- Supabase JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Welcome to FilmHub!</h1>
        <p style="text-align:center;">Please login or signup to access our full collection.</p>
        <div class="btn-group">
            <a href="login.html" class="button">Login</a>
            <a href="signup.html" class="button">Signup</a>
        </div>
        <h2 style="margin-top:40px; text-align:center; color:#c0392b;">Featured Films</h2>
        <div id="loading">Loading films...</div>
        <div class="films" id="films"></div>
    </div>
    <script>
      // Replace these with your own Supabase project credentials
      const SUPABASE_URL = 'https://crghsjtbrjaxgawxxyfn.supabase.co';
      const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNyZ2hzanRicmpheGdhd3h4eWZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzYxMjIsImV4cCI6MjA3NzQ1MjEyMn0.-r9WmYRHJ2nvZs-0wb7KEqor2vbtkFDixpqMwo3l0XM';
      const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      // Fetch films from Supabase
      async function loadFilms() {
        const { data, error } = await supabase
          .from('films')   // Table name: films
          .select('*')
          .limit(6);

        const filmsDiv = document.getElementById('films');
        const loadingDiv = document.getElementById('loading');
        loadingDiv.style.display = 'none';

        if (error) {
          filmsDiv.innerHTML = '<p style="color:red;">Failed to load films.</p>';
          return;
        }
        if (!data || data.length === 0) {
          filmsDiv.innerHTML = '<p>No films to show yet.</p>';
          return;
        }

        filmsDiv.innerHTML = '';
        data.forEach(film => {
          filmsDiv.innerHTML += `
            <div class="film-card">
              <img src="${film.poster_url || 'https://via.placeholder.com/100x150?text=No+Image'}" alt="${film.title}">
              <div class="film-title">${film.title}</div>
              <div>${film.genre || ''}</div>
              <div style="margin-top:6px;">
                <a href="${film.download_url || '#'}" class="button" style="background:#27ae60;" target="_blank">
                  Download
                </a>
              </div>
            </div>
          `;
        });
      }

      loadFilms();
    </script>
</body>
</html>
